DTE: false
postgresql:
  global:
    postgresql: {}
  fullnameOverride: 
  image:
    debug: false
    pullPolicy: Always
  volumePermissions:
    enabled: true
    image:
      pullPolicy: Always
      registry: docker.io
      repository: bitnami/minideb
      tag: stretch
    securityContext:
      runAsUser: "auto"
  shmVolume:
    chmod:
      enabled: false
  containerSecurityContext:
    enabled: false    
  securityContext:
    enabled: false
    fsGroup: 1001
    runAsUser: 1001
  serviceAccount:
    enabled: true
  replication:
    applicationName: my_application
    enabled: false
    numSynchronousReplicas: 0
    password: repl_password
    slaveReplicas: 1
    synchronousCommit: "off"
    user: repl_user
  postgresqlUsername: "admin"
  usePasswordFile: false
  postgresqlDatabase: "api-db"
  postgresqlDataDir: /bitnami/postgresql/data
  service:
    annotations: {}
    port: 5432
    type: ClusterIP
  persistence:
    accessModes:
    - ReadWriteOnce
    enabled: true
    mountPath: /bitnami/postgresql
    size: 2Gi
    storageClass: stakater 
    subPath: ""
  updateStrategy:
    type: RollingUpdate
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 1Gi
  networkPolicy:
    allowExternal: true
    enabled: false
  livenessProbe:
    enabled: true
    failureThreshold: 6
    initialDelaySeconds: 30
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 5
  readinessProbe:
    enabled: true
    failureThreshold: 6
    initialDelaySeconds: 5
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 5

application: 
 applicationName: "sulussen"
 # tenant operator space
 space:
   enabled: true
   tenant: "allmannyttan"
   annotations:
      argocd.argoproj.io/sync-wave: "-1"
   additionalLabels:
      kind: pr
      team: allmanytta

 # kubernetes deployment
 deployment:
   annotations:
   volumes: {}
   imagePullSecrets: nexus-docker-config-forked   
   env:
   - name: POSTGRES__HOST
     value: slussen-postgresql
   - name: DATABASE_URL
     value: postgres://$(POSTGRES_USER):$(POSTGRES_PASSWORD)@slussen-postgresql:5432/api-db
   - name: POSTGRES_USER
     value: admin
   - name: POSTGRES_PASSWORD
     valueFrom:
       secretKeyRef:
         name: slussen-postgresql
         value: postgresql-password
      
          
   image:
     repository: IMAGE
     tag: TAG
   resources: 
     limits:
       memory: 1Gi 
       cpu: 0.5
     requests:
       memory: 128Mi
       cpu: 0.1
   probes:
     readinessProbe:
       failureThreshold: 3
       periodSeconds: 60
       successThreshold: 1
       timeoutSeconds: 1
       initialDelaySeconds: 10
       httpGet:
         path: /health
         port: 8080
     livenessProbe:
       failureThreshold: 3
       periodSeconds: 60
       successThreshold: 1
       timeoutSeconds: 1
       initialDelaySeconds: 10
       httpGet:
         path: /health
         port: 8080
 # kubernetes service         
 service:
   ports:
   - port: 8080
     name: https
     targetPort: 8080
 # kubernetes rbac
 rbac:
   create: true
   serviceAccount:
     create: true
     enabled: true
